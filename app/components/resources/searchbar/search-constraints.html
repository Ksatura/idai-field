<div class="btn-group">
    <div id="add-constraint-button" class="btn btn-primary"
         (mouseenter)="showConstraintsMenu = true;"
         (mouseleave)="showConstraintsMenu = false;"
         (click)="openModal(constraintModal)">
        Felder
        <span class="badge badge-light">{{constraints.length}}</span>
        <span class="mdi mdi-plus"></span>
    </div>
</div>

<div *ngIf="showConstraintsMenu && constraints.length > 0" id="constraints-menu">
    <div *ngFor="let constraint of constraints">
        <b>{{constraint.fieldName}}:</b> {{constraint.searchTerm}}
    </div>
</div>

<ng-template #constraintModal let-c="close">
    <div class="modal-header">
        <h5 class="modal-title">Suchkriterium hinzuf√ºgen</h5>
    </div>
    <div class="modal-body">
        <select (change)="selectField($event.target.value)" class="form-control">
            <option value="" [selected]="!selectedField"></option>
            <option *ngFor="let field of fields" value="{{field.name}}"
                    [selected]="selectedField && selectedField.name === field.name">
                {{field.label}}
            </option>
        </select>

        <div *ngIf="getSearchInputType(selectedField) === 'input'">
            <input type="text" [(ngModel)]="searchTerm" class="form-control">
        </div>

        <div *ngIf="getSearchInputType(selectedField) === 'dropdown'">
            <select [(ngModel)]="searchTerm" class="form-control">
                <option value=""></option>
                <option *ngFor="let value of selectedField.valuelist" value="{{value}}">{{value}}</option>
            </select>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" id="delete-images-confirm" class="btn btn-primary" (click)="c('ok')">OK</button>
        <button type="button" id="delete-images-cancel" class="btn btn-secondary" (click)="c('cancel')">Abbrechen</button>
    </div>
</ng-template>