<ul id="objectList" class="list-group object-list" (scroll)="closeContextMenu()">
    <li *ngFor="let document of viewFacade.getDocuments()"
        (click)="select(document)"
        (dblclick)="resourcesComponent.editDocument(document, 'fields')"
        (contextmenu)="openContextMenu($event, document)"
        class="list-group-item"
        [class.new-from-remote]="viewFacade.isNewDocumentFromRemote(document)"
        [class.conflicted]="document['_conflicts']"
        [class.selected]="viewFacade.getSelectedDocument()
                && viewFacade.getSelectedDocument().resource.id === document.resource.id"
        [id]="'resource-' + document.resource.identifier">

        <div *ngIf="showMoveIntoOption(document)"
             class="hierarchy-button move-into-button btn float-right"
             ngbTooltip="Untergeordnete Ressourcen ansehen"
             i18n-ngbTooltip="@@resources.moveIntoButton.tooltip"
             placement="left"
             triggers="manual"
             #tooltip="ngbTooltip"
             (mouseover)="tooltip.open()"
             (mouseleave)="tooltip.close()"
             (mousedown)="tooltip.close()"
             (click)="moveInto(document); $event.stopPropagation();">
            <span *ngIf="viewFacade.getChildrenCount(document) > 0"
                  class="badge badge-secondary">{{viewFacade.getChildrenCount(document)}}</span>
            <span class="mdi mdi-subdirectory-arrow-right mdi-18px"
                  [class.show-only-on-hover]="viewFacade.getChildrenCount(document) > 0"></span>
        </div>

        <div *ngIf="showJumpToViewOption(document) && document.resource.type !== 'Trench'"
             class="hierarchy-button btn float-right"
             ngbTooltip="Zur Maßnahme wechseln"
             i18n-ngbTooltip="@@resources.jumpToView.tooltip"
             placement="left"
             triggers="manual"
             #tooltip="ngbTooltip"
             (mouseover)="tooltip.open()"
             (mouseleave)="tooltip.close()"
             (mousedown)="tooltip.close()"
             (click)="jumpToView(document); $event.stopPropagation();">
            <span class="mdi mdi-arrow-top-right mdi-18px"></span>
        </div>

        <div *ngIf="showJumpToViewOption(document) && document.resource.type === 'Trench'"
             ngbDropdown placement="bottom-right"
            (click)="$event.stopPropagation()">
            <div class="hierarchy-button btn float-right" ngbDropdownToggle>
                <span class="mdi mdi-arrow-top-right mdi-18px"></span>
            </div>
            <div ngbDropdownMenu>
                <div id="jump-to-resources-view-button"
                     class="dropdown-item"
                     (click)="jumpToView(document)">
                    <span class="dropdown-entry-label"
                          i18n="@@resources.jumpToView.resources">Ressourcenansicht</span>
                </div>
                <div id="jump-to-matrix-view-button"
                     class="dropdown-item"
                     (click)="jumpToMatrix(document)">
                    <span class="dropdown-entry-label"
                          i18n="@@resources.jumpToView.matrix">Matrix</span>
                </div>
            </div>
        </div>

        <div class="document-teaser-container">
            <document-teaser [document]="document"></document-teaser>
        </div>
    </li>

    <li *ngIf="isDocumentLimitExceeded()" id="document-limit-info" i18n="@@resources.sidebarList.resourceLimitInfo">
        Es werden die ersten {{viewFacade.getDocuments().length}} von {{viewFacade.getTotalDocumentCount()}}
        Ressourcen angezeigt. Schränken Sie die Suche weiter ein oder verlassen Sie den erweiterten Suchmodus,
        um auf die übrigen Ressourcen zuzugreifen.
        <br><br><br>
    </li>
</ul>

<plus-button *ngIf="isPlusButtonShown()" id="create-document-button" [placement]="'top'"
             [preselectedType]="getCurrentFilterType()"
             [liesWithin]="getSelectedSegmentDoc()"
             [isRecordedIn]="viewFacade.getCurrentOperation()"
             [status]="getPlusButtonStatus()"></plus-button>
<loading-icon></loading-icon>