<document-view [document]="documentsManager.selectedDocument" (onSolveConflicts)="resourcesComponent.solveConflicts($event)"
               (onDeselect)="documentsManager.deselect()">

    <ngb-tabset activeId="document-view-{{activeTab}}-tab">>
        <ngb-tab id="document-view-fields-tab">
            <ng-template ngbTabTitle>
                <span class="mdi mdi-format-list-bulleted"></span>
            </ng-template>
            <ng-template ngbTabContent>

                <button class="btn btn-link"
                        id="document-view-button-edit-document"
                        (click)="resourcesComponent.editDocument(documentsManager.selectedDocument, 'fields')">
                    <span class="mdi mdi-pencil"></span>
                </button>

                <description-view [document]="documentsManager.selectedDocument"></description-view>
                <fields-view [resource]="documentsManager.selectedDocument.resource"></fields-view>
            </ng-template>
        </ngb-tab>

        <ngb-tab id="document-view-geometry-tab">
            <ng-template ngbTabTitle>
                <span class="mdi mdi-map" [class.empty-tab]="!documentsManager.selectedDocument.resource.geometry"></span>
            </ng-template>
            <ng-template ngbTabContent>

                <geometry-view [document]="documentsManager.selectedDocument"
                               (onEditGeometry)="resourcesComponent.isEditingGeometry = true;"
                               (onCreateGeometry)="resourcesComponent.createGeometry($event)">
                </geometry-view>
            </ng-template>
        </ngb-tab>

        <ngb-tab id="document-view-relations-tab">
            <ng-template ngbTabTitle>
                <span class="mdi mdi-sitemap" [class.empty-tab]="!hasRelations()"></span>
            </ng-template>
            <ng-template ngbTabContent>

                <button class="btn btn-link"
                        id="document-view-button-edit-document"
                        (click)="resourcesComponent.editDocument(documentsManager.selectedDocument, 'relations')">
                    <span class="mdi mdi-pencil"></span>
                </button>

                <div *ngIf="!hasRelations()" class="empty-tab-info">Keine Relationen vorhanden.</div>
                <relations-view *ngIf="hasRelations()" [resource]="documentsManager.selectedDocument.resource"
                                (onRelationTargetClicked)="jumpToRelationTarget($event)">
                </relations-view>
            </ng-template>
        </ngb-tab>

        <ngb-tab id="document-view-images-tab">
            <ng-template ngbTabTitle>
                        <span class="mdi mdi-image"
                              [class.empty-tab]="!documentsManager.selectedDocument.resource.relations['isDepictedIn']"></span>
            </ng-template>
            <ng-template ngbTabContent>
                <button class="btn btn-link"
                        id="document-view-button-edit-document"
                        (click)="resourcesComponent.editDocument(documentsManager.selectedDocument, 'images')">
                    <span class="mdi mdi-pencil"></span>
                </button>

                <div *ngIf="!documentsManager.selectedDocument.resource.relations['isDepictedIn']" class="empty-tab-info">
                    Keine Bilder vorhanden.
                </div>
                <thumbnail-view *ngIf="documentsManager.selectedDocument.resource.relations['isDepictedIn']"
                                [imageIds]="documentsManager.selectedDocument.resource.relations['isDepictedIn']"
                                (onRelationTargetClicked)="jumpToRelationTarget($event)">
                </thumbnail-view>
            </ng-template>
        </ngb-tab>
    </ngb-tabset>
</document-view>