<div *ngIf="listComponent.showRow(docRef)"
        id="resource-{{docRef.doc.resource.identifier}}" (dblclick)="resourcesComponent.editDocument(docRef.doc)"
        class="row py-3" [class.bg-faded]="depth == 0" style="border-top: 1px solid rgba(0, 0, 0, 0.125)"
        [class.no-search-result]="!listComponent.documentsInclude(docRef.doc)">
    <div class="col-md-3" [style.padding-left]="(1+depth*2) + 'rem'" [class.font-weight-bold]="depth == 0">
        <div style="margin-top: -8px; display:inline-block; width:24px; float:right">
            <plus-button [isRecordedIn]="resourcesComponent.selectedMainTypeDocument" [liesWithin]="docRef.doc"
                     [preselectedGeometryType]="'none'" (dblclick)="$event.stopPropagation();"></plus-button>
        </div>

        {{typesMap[docRef.doc.resource.type].label}}<br>
        <span *ngIf="docRef.children.length > 0"
                (click)="listComponent.toggleChildrenForId(docRef.doc.resource.id)"
                class="btn btn-sm btn-link p-0">
             <span class="mdi h5" [class.mdi-chevron-down]="!listComponent.childrenHiddenFor(docRef.doc.resource.id)"
                   [class.mdi-chevron-right]="listComponent.childrenHiddenFor(docRef.doc.resource.id)"></span>
        </span>
        <small class="text-muted" *ngIf="docRef.children.length > 0">
            {{docRef.children.length}}
        </small>

    </div>
    <div class="col-md-3">
        <input [(ngModel)]="docRef.doc.resource.identifier" (blur)="save(docRef.doc)" (keyup)="markAsChanged()"
               (dblclick)="$event.stopPropagation();" class="form-control form-control-sm identifier-input">

    </div>
    <div class="col-md-4">
        <input [(ngModel)]="docRef.doc.resource.shortDescription" (blur)="save(docRef.doc)"
               (keyup)="markAsChanged()" (dblclick)="$event.stopPropagation();" class="form-control form-control-sm">
    </div>
    <div class="col-md-2">
        
        <small>
            <button (click)="resourcesComponent.editDocument(docRef.doc)" class="btn btn-sm btn-link">
                Bearbeiten
            </button>
        </small>
    </div>
</div>

<div *ngFor="let childDoc of docRef['children']"
     [hidden]="listComponent.childrenHiddenFor(docRef.doc.resource.id)">
    <row [docRef]="childDoc" [depth]=depth+1 [typesMap]="typesMap"></row>
</div>