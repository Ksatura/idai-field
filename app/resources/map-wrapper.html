<div class="row map-wrapper">
    <div class="col-lg-3 col-md-3 col-sm-3" id="objectOverview">
        <ul class="list-group object-list" id="objectList">
            <li *ngFor="let document of viewFacade.getDocuments(); let index=index"
                (click)="select(document)"
                (dblclick)="resourcesComponent.editDocument(document, 'fields')"
                (drop)="uploadImages($event, document)"
                class="list-group-item"
                [class.new-from-remote]="viewFacade.isNewDocumentFromRemote(document)"
                [class.conflicted]="document['_conflicts']"
                [class.selected]="viewFacade.getSelectedDocument()
                    && viewFacade.getSelectedDocument().resource.id === document.resource.id"
                [id]="'resource-' + document.resource.identifier">

                <document-teaser [document]="document"></document-teaser>
            </li>
        </ul>

        <plus-button *ngIf="!resourcesComponent.isEditingGeometry && resourcesComponent.ready
                            && !loading.showIcons && viewFacade.getQuery().q == ''
                            && viewFacade.getSelectedMainTypeDocument()"
                     id="create-document-button" [placement]="'top'"
                     [preselectedType]="viewFacade.getCurrentFilterType()"
                     [isRecordedIn]="viewFacade.getSelectedMainTypeDocument()"></plus-button>
        <loading-icon></loading-icon>
    </div>

    <div [class.col-sm-9]="!viewFacade.getSelectedDocument() || !viewFacade.getSelectedDocument().resource.id"
         [class.col-sm-6]="viewFacade.getSelectedDocument() && viewFacade.getSelectedDocument().resource.id"
         class="px-0">
        <editable-map [documents]="viewFacade.getDocuments()"
                      [selectedDocument]="viewFacade.getSelectedDocument()"
                      [mainTypeDocument]="viewFacade.getSelectedMainTypeDocument()"
                      [isEditing]="resourcesComponent.isEditingGeometry"
                      [projectDocument]="resourcesComponent.projectDocument"
                      [stayInBounds]="viewFacade.getView().mainType != 'Project'"
                      [update]="resourcesComponent.ready" (onSelectDocument)="select($event, true)"
                      (onQuitEditing)="quitEditing($event)"></editable-map>
    </div>

    <div *ngIf="viewFacade.getSelectedDocument() && viewFacade.getSelectedDocument().resource.id"
         class="col-sm-3 document-info px-0">
        <document-view-wrapper [activeTab]="activeTab" [updateThumbnails]="updateThumbnails"
                               (drop)="uploadImages($event, viewFacade.getSelectedDocument())">
        </document-view-wrapper>
    </div>
</div>