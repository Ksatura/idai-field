<div class="modal-header">
    <h5 class="modal-title"
        i18n="@@navbar.taskbar.warnings.header">Warnungen</h5>
    <button id="close-warnings-modal-button"
            class="btn btn-primary btn-square" 
            (click)="close()">
        <span class="mdi mdi-close"></span>
    </button>
</div>

<div class="modal-body warnings-modal-body row bg-light">
    <div class="col-md-6">
        <select id="warning-filter-select" class="form-control"
                (change)="selectWarningFilter($event.target.value)">
            <option *ngFor="let warningFilter of warningFilters"
                    [value]="warningFilter.constraintName"
                    [selected]="selectedWarningFilter === warningFilter">
                {{warningFilter.label}} ({{warningFilter.count}})
            </option>
        </select>

       <document-picker [filterOptions]="categoryFilters"
                        [getConstraints]="getConstraints"
                        [limit]="20000"
                        [waitForUserInput]="false"
                        [markSelected]="true"
                        [autoSelect]="true"
                        [showConfigurationOption]="isConfigurationOptionVisible()"
                        (documentSelected)="selectDocument($event)"></document-picker>
    </div>
    <div *ngIf="selectedDocument" id="document-warnings-container" class="col-md-6">
        <div id="document-warnings-header">
            <document-teaser [document]="selectedDocument"></document-teaser>
        </div>
        <div id="document-warnings-content">
            <div *ngFor="let section of sections" class="card">
                <div class="card-header h4">
                    <span class="card-title">
                        {{getWarningTypeLabel(section)}}
                        <span *ngIf="isFieldLabelVisible(section)"
                              class="field-label">{{getFieldLabel(section)}}</span>
                    </span>
                </div>
                <div class="card-block">
                    <span *ngIf="section.type === 'conflicts'">
                        <button class="btn btn-primary" (click)="openConflictResolver()">
                            <span class="mdi mdi-pencil"></span>
                            <span class="button-label"
                                  i18n="@@docedit.tabs.conflicts.resolveConflict">Konflikt lösen</span>
                        </button>
                    </span>
                    <span *ngIf="section.type === 'unconfigured'">
                        <button class="btn btn-danger" (click)="openDeleteFieldDataModal(section)">
                            <span class="mdi mdi-delete"></span>
                            <span class="button-label"
                                  i18n="@@navbar.taskbar.warnings.deleteFieldData">Felddaten löschen</span>
                        </button>
                    </span>
                    <span *ngIf="section.type === 'invalid'">
                        <button class="btn btn-danger" (click)="openDeleteFieldDataModal(section)">
                            <span class="mdi mdi-delete"></span>
                            <span class="button-label"
                                  i18n="@@navbar.taskbar.warnings.deleteFieldData">Felddaten löschen</span>
                        </button>
                    </span>
                    <span *ngIf="section.type === 'missingIdentifierPrefix'">
                        <button class="btn btn-primary" (click)="openDoceditModal(section)">
                            <span class="mdi mdi-pencil"></span>
                            <span class="button-label"
                                  i18n="@@resources.contextMenu.edit">Bearbeiten</span>
                        </button>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
