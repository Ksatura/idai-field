<div class="row">


    <div class="col-lg-3 col-md-3 col-sm-3"
         id="objectOverview">
        <aside>
            <header>
                <h1>
                    <span class="mdi mdi-view-list"></span>
                    Ressourcen
                </h1>
            </header>

            <main>

                <div class="search">
                    <input #searchInput (keyup)="onKey($event)"
                           class="form-control"
                           id="object-search"
                           placeholder="Search...">
                    <span class="glyphicon glyphicon-search"></span>
                </div>
                <ul *ngIf="objectList.getDocuments()" class="list-group" id="objectList">
                    <li *ngFor="let document of objectList.getDocuments(); let index=index"
                        (click)="select(document)"
                        class="list-group-item"
                        [class.synced]="document.synced"
                        [class.unsynced]="!document.synced"
                        [class.selected]="selectedDocument && selectedDocument.id === document.id"
                        onclick="window.scrollTo(0, 0)">
                        <!-- Enable when finally implemented in Chromium
                            onclick="window.scrollTo({'behavior':'smooth','top':'0','left':'0'})">
                            -->
                        <div *ngIf="document['resource'].identifier || document['resource'].title">
                            <div id="object-overview-title-{{index}}" class="title">{{document['resource'].title}}</div>

                            <div id="object-overview-identifier-{{index}}" class="identifier">{{document['resource'].identifier}}</div>
                        </div>
                        <div id="object-overview-note-{{index}}" *ngIf="!(document['resource'].identifier || document['resource'].title)" class="new">Neues Objekt</div>
                    </li>
                </ul>
                <div id="object-overview-button-create-object"
                     *ngIf="searchInput.value.length == 0"
                     class="circular-button green-button"
                     (click)="select()"
                     onclick="window.scrollTo(0, 0)">+</div>
                <!-- Enable when finally implemented in Chromium
                    onclick="window.scrollTo({'behavior':'smooth','top':'0','left':'0'})">
                    -->

            </main>
        </aside>
    </div>

    <map *ngIf="!selectedDocument" class="col-lg-9 col-md-9 col-sm-9" [documents]="objectList.getDocuments()"></map>

    <div *ngIf="selectedDocument" class="col-lg-9 col-md-9 col-sm-9" id="document-edit-wrapper">
        <section>
            <header>
                <h1 *ngIf="!editMode" class="overview-document-heading">
                    <button class="btn btn-secondary pull-xs-right" id="document-view-button-back-to-map"
                            (click)="selectedDocument = undefined;">Zurück zur Karte</button>
                    <button class="btn btn-secondary pull-xs-right" id="document-view-button-edit-document"
                            (click)="editMode = true;">Bearbeiten</button>
                    <span class="mdi mdi-blur"></span>
                    <span *ngIf="!editMode">Ressource anzeigen</span>
                </h1>
                <h1 *ngIf="editMode && selectedDocument['resource']['type']" class="overview-document-heading">
                    <button class="btn btn-secondary pull-xs-right" id="document-edit-button-abort"
                            (click)="discardChanges(selectedDocument, false)">Abbrechen</button>
                    <button class="btn btn-secondary pull-xs-right" id="document-edit-button-save-document"
                            (click)="save(selectedDocument,false)">Speichern</button>
                    <span class="mdi mdi-blur"></span>
                    Ressource bearbeiten
                </h1>
                <h1 *ngIf="editMode && !selectedDocument['resource']['type']" class="overview-document-heading">
                    <span class="mdi mdi-blur"></span>
                    Neue Ressource
                </h1>
            </header>
            <main>
                <document-view *ngIf="!editMode" [document]="selectedDocument" (documentSelection)="select($event)"></document-view>
                <document-edit *ngIf="editMode" [(document)]="selectedDocument" [primary]="'identifier'"></document-edit>
            </main>
        </section>
    </div>

    <template #modalTemplate>
        <div class="modal-header">
            <h4 class="modal-title">Speichern?</h4>
        </div>
        <div class="modal-body">
            Das Objekt wurde geändert. Möchten Sie die Änderungen speichern?
        </div>
        <div class="modal-footer">
            <button id="overview-save-confirmation-modal-save-button" type="button" class="btn btn-primary"
                    (click)="save(selectedDocument); modal.close();">Speichern</button>
            <button type="button" class="btn btn-secondary"
                    (click)="discardChanges(selectedDocument); modal.close();">Änderungen verwerfen</button>
            <button id="overview-save-confirmation-modal-cancel-button" type="button" class="btn btn-secondary"
                    (click)="modal.close();">Abbrechen</button>
        </div>
    </template>

</div>

